generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    id            String             @id @default(uuid())
    name          String
    email         String             @unique
    password      String?
    salt          String?
    role          Roles              @default(CLIENT)
    photo         String?
    oauthAccounts UserOAuthAccount[]
    createdAt     DateTime           @default(now()) @map("created_at")
    updatedAt     DateTime           @updatedAt @map("updated_at")

    @@map("users")
}

model UserOAuthAccount {
    userId            String       @map("user_id")
    provider          AuthProvider
    providerAccountId String       @unique() @map("provider_account_id")
    createdAt         DateTime     @default(now()) @map("created_at")
    updatedAt         DateTime     @updatedAt @map("updated_at")
    user              User         @relation(fields: [userId], references: [id], onDelete: Cascade)

    @@id([providerAccountId, provider])
    @@map("user_oauth_accounts")
}

enum Roles {
    ADMIN
    VET
    CLIENT

    @@map("roles")
}

enum AuthProvider {
    google
    github
    facebook

    @@map("auth_provider")
}
